---
code: |
  proxy_conn = ProxyConnection()
---
question: |
  eFile IL Login Info
subquestion: |
  Please provide your eFile Illinois Login information. If you don't yet have a login, please make one [here](/start/tyler_new_user).
fields:
  - email/username: my_username
  - password: my_password
    datatype: password
    hide if: user_forgot_password
  - I forgot my password: user_forgot_password
    datatype: yesno    
---
code: |
  if not user_forgot_password:
    tyler_login_resp = proxy_conn.authenticate_user(tyler_email=my_username, tyler_password=my_password)
    del my_password
    if not tyler_login_resp.is_ok():
      login_failed_screen
  if user_forgot_password:
    tyler_reset_password_resp = proxy_conn.reset_user_password(my_username)
    reset_password_screen
  # TODO(brycew): handle improper login info
  tyler_login = True
---
event: reset_password_screen
question: |
  % if tyler_reset_password_resp.is_ok():
  Your password reset was requested
  % else:
  Something went wrong when we tried to reset your password
  % endif
buttons:
  - restart
---
event: login_failed_screen
question: |
  Tyler Login failed
subquestion: |
  Please try again
buttons:
  - restart